<% 
  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawEmailVolumeCharts(incomingEmailData, outgoingEmailData) {
  	drawEmailVolumeChart(incomingEmailData, "incoming_email_volume_chart_div");
  	drawEmailVolumeChart(outgoingEmailData, "outgoing_email_volume_chart_div");
  }

  function drawEmailVolumeChart(email_data, div_id) {

    // Create the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Person');
    data.addColumn('number', 'Percentage');
    data.addRows(email_data.people);

    // Set chart options
    var options = {'title':email_data.title,
                   'width':500,
                   'height':300};

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.PieChart(document.getElementById(div_id));
    chart.draw(data, options);
  }

  // Load the Visualization API and the piechart package, and set a callback to run when the Google Visualization API is loaded.

  setTimeout(function() {
    google.load('visualization', '1.0',
                {'callback': function() {drawEmailVolumeCharts(incomingEmailData, outgoingEmailData); },
                'packages':['corechart']}
                )
  }, 1000);

%>

<div class="page-header">
  <h1 class="h1">Reports <small>with advanced analytics</small></h1>
</div>
<div>
	<div id="incoming_email_volume_chart_div" style="float: left;"></div>
	<div id="outgoing_email_volume_chart_div" style="float: left;"></div>
</div>
